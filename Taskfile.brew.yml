version: '3'

set: [ errexit, nounset, pipefail ]
silent: true

vars:
  DEFAULT_STDOUT: '{{.STDOUT | default (.DEFAULT_STDOUT | default "true")}}'
  DEFAULT_STDERR: '{{.STDERR | default (.DEFAULT_STDERR | default "true")}}'

includes:
  shell:
    taskfile: Taskfile.shell.yml
    internal: true

tasks:

  install:
    label: brew:install:{{.PACKAGE}}
    dir: '{{.USER_WORKING_DIR}}'
    interactive: true
    vars:
      PACKAGE: '{{.PACKAGE}}'
      SPINNER_TITLE: '{{.SPINNER_TITLE | default (printf "Installing %s" .PACKAGE)}}'
      STDERR: '{{.STDERR | default .DEFAULT_STDERR}}'
      STDOUT: '{{.STDOUT | default .DEFAULT_STDOUT}}'
    cmds:
      - task: tui:run-with-spinner
        vars:
          CLI_ARGS: brew install {{.PACKAGE}}
          SPINNER_TITLE: '{{.SPINNER_TITLE}}'
